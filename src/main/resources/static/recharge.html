<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sản Phẩm - ShoppyDex</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/toast.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        main {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 0 2rem;
            flex-grow: 1;
            width: 90%;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
            animation: fadeInUp 0.8s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .page-header h1 {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .page-header p {
            font-size: 1.1rem;
            color: #666;
        }

        .recharge-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        /* Provider Selection */
        .provider-section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .providers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .provider-card {
            padding: 1.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .provider-card img {
            height: 25px;
            width: auto;
            margin-bottom: 0.5rem;
        }

        .provider-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
            transform: translateY(-4px);
        }

        .provider-card.active {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
        }

        .provider-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .provider-name {
            font-weight: 600;
            color: #333;
            font-size: 0.95rem;
        }

        /* Denomination Selection */
        .denomination-section {
            margin-bottom: 2rem;
        }

        .denominations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .denomination-card {
            padding: 1.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .denomination-card:hover {
            border-color: #2ecc71;
            box-shadow: 0 4px 12px rgba(46, 204, 113, 0.2);
            transform: translateY(-4px);
        }

        .denomination-card.active {
            border-color: #2ecc71;
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1) 0%, rgba(39, 174, 96, 0.1) 100%);
            box-shadow: 0 6px 16px rgba(46, 204, 113, 0.3);
        }

        .denomination-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2ecc71;
            margin-bottom: 0.3rem;
        }

        .denomination-label {
            font-size: 0.85rem;
            color: #999;
        }

        /* Input Section */
        .input-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            border-radius: 12px;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-input:disabled {
            background: #f5f5f5;
            color: #999;
            cursor: not-allowed;
        }

        .input-hint {
            font-size: 0.85rem;
            color: #999;
            margin-top: 0.3rem;
        }

        /* Summary Section */
        .summary-section {
            padding: 1.5rem;
            background: linear-gradient(135deg, #f9f9f9 0%, #f0f0f0 100%);
            border-radius: 12px;
            margin-bottom: 2rem;
            border: 1px solid #e0e0e0;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .summary-item:last-child {
            margin-bottom: 0;
            padding-top: 1rem;
            border-top: 2px solid #e0e0e0;
        }

        .summary-label {
            color: #666;
            font-weight: 500;
        }

        .summary-value {
            font-weight: 600;
            color: #333;
        }

        .summary-total {
            font-size: 1.3rem;
            color: #2ecc71;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-reset {
            background: #f0f0f0;
            color: #666;
            border: 1px solid #ddd;
        }

        .btn-reset:hover {
            background: #e8e8e8;
        }

        .btn-submit {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
            flex: 1;
            justify-content: center;
        }

        .btn-submit:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(46, 204, 113, 0.4);
        }

        .btn-submit:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Info Box */
        .info-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-left: 4px solid #667eea;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .info-box-title {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-box-content {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        #toast {
            z-index: 4000 !important;
        }

        @media (max-width: 768px) {
            main {
                width: 95%;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .recharge-container {
                padding: 1.5rem;
            }

            .providers-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .denominations-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header class="site-header">
        <nav class="main-navbar">
            <div class="logo">
                <a href="index.html">ShopAcc</a>
            </div>
            <ul class="nav-links">
                <li>
                    <a href="/">
                        <i class="fa-solid fa-house"></i>
                        <span>Trang chủ</span>
                    </a>
                </li>
                <li>
                    <a href="/nap-tien"  style="background: rgba(255, 255, 255, 0.15);">
                        <i class="fa-solid fa-wallet"></i>
                        <span>Nạp tiền</span>
                    </a>
                </li>
                <li>
                    <a href="/san-pham">
                        <i class="fa-solid fa-user-tag"></i>
                        <span>Sản phẩm</span>
                    </a>
                </li>
            </ul>
            <div class="user-actions">
                <div class="btn-info" id="user-point" >
                    <div>0 </div>
                    <i class="fa-brands fa-product-hunt"></i>
                </div>

                <div class="btn-info" id="user-profile">
                    <i class="fa-solid fa-user"></i>
                    <div>Đăng nhập</div>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <div class="page-header">
            <h1>Nạp Thẻ Điện Thoại</h1>
            <p>Nạp tiền nhanh chóng, an toàn với các nhà mạng hàng đầu</p>
        </div>

        <div class="info-box">
            <div class="info-box-title">
                <i class="fa-solid fa-circle-info"></i>
                Hướng dẫn nạp thẻ
            </div>
            <div class="info-box-content">
                Chọn nhà mạng, mệnh giá, nhập số seri và mã PIN để tiến hành nạp tiền vào tài khoản của bạn. Quá trình nạp sẽ hoàn tất trong vòng 24 giờ.
            </div>
        </div>

        <div class="recharge-container">
            <form id="rechargeForm" onsubmit="handleSubmit(event)">
                <!-- Provider Selection -->
                <div class="provider-section">
                    <div class="section-title">
                        <i class="fa-solid fa-phone"></i>
                        Chọn nhà mạng
                    </div>
                    <div class="providers-grid" id="providersGrid">
                        <div class="provider-card" onclick="selectProvider('viettel', this)">
                            <img src="/image/viettel.svg"/>
                            <div class="provider-name">Viettel</div>
                        </div>
                        <div class="provider-card" onclick="selectProvider('vinaphone', this)">
                            <img src="/image/vinaphone.svg"/>
                            <div class="provider-name">VinaPhone</div>
                        </div>
                        <div class="provider-card" onclick="selectProvider('mobiphone', this)">
                            <img src="/image/mobiphone.svg"/>
                            <div class="provider-name">MobiPhone</div>
                        </div>
                    </div>
                </div>

                <!-- Denomination Selection -->
                <div class="denomination-section">
                    <div class="section-title">
                        <i class="fa-solid fa-tags"></i>
                        Chọn mệnh giá
                    </div>
                    <div class="denominations-grid" id="denominationsGrid">
                        <div class="denomination-card" onclick="selectDenomination(20000, this)">
                            <div class="denomination-value">20K</div>
                            <div class="denomination-label">20,000 đ</div>
                        </div>
                        <div class="denomination-card" onclick="selectDenomination(50000, this)">
                            <div class="denomination-value">50K</div>
                            <div class="denomination-label">50,000 đ</div>
                        </div>
                        <div class="denomination-card" onclick="selectDenomination(100000, this)">
                            <div class="denomination-value">100K</div>
                            <div class="denomination-label">100,000 đ</div>
                        </div>
                        <div class="denomination-card" onclick="selectDenomination(200000, this)">
                            <div class="denomination-value">200K</div>
                            <div class="denomination-label">200,000 đ</div>
                        </div>
                        <div class="denomination-card" onclick="selectDenomination(500000, this)">
                            <div class="denomination-value">500K</div>
                            <div class="denomination-label">500,000 đ</div>
                        </div>
                    </div>
                </div>

                <!-- Input Section -->
                <div class="input-section">
                    <div class="form-group">
                        <label class="form-label">Số Serial (Mã Seri)</label>
                        <input type="text" id="serialNumber" class="form-input" placeholder="Nhập số serial trên thẻ" required disabled>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Mã PIN</label>
                        <input type="password" id="pinCode" class="form-input" placeholder="Nhập mã PIN trên thẻ" required disabled>
                    </div>
                </div>

                <!-- Summary Section -->
                <div class="summary-section">
                    <div class="summary-item">
                        <span class="summary-label">Nhà mạng:</span>
                        <span class="summary-value" id="summaryProvider">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Mệnh giá:</span>
                        <span class="summary-value" id="summaryDenomination">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Số điểm nhận được:</span>
                        <div class="summary-value summary-total" id="summaryTotal" style="display: flex; align-items: center;">
                            <div style="white-space: pre-wrap">0 </div>
                            <i class="fa-brands fa-product-hunt"></i>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button type="reset" class="btn btn-reset" onclick="resetForm()">
                        <i class="fa-solid fa-arrow-rotate-left"></i>
                        Làm mới
                    </button>
                    <button type="submit" class="btn btn-submit" id="submitBtn" disabled>
                        <i class="fa-solid fa-check"></i>
                        Nạp thẻ ngay
                    </button>
                </div>
            </form>
        </div>
    </main>

    <div id="toast" class="toast">
        <i class="fa-solid fa-circle-check"></i> 
        <span id="toast-message">Thao tác đã thành công!</span>
    </div>
    <footer>
        <div class="footer-content">
            <p>&copy; 2025 ShopAcc. All rights reserved.</p>
            <p>Liên hệ: <a href="mailto:support@shoppydex.com">support@shoppydex.com</a></p>
            <p>Hotline: 0123.456.789 | Địa chỉ: PTIT Ha Noi</p>
        </div>
    </footer>
    <script src="/js/api-wrapper.js"></script>
    <script src="/js/user-nav.js"></script>
    <script src="/js/toast.js"></script>
    <script>
        let selectedProvider = null;
        let selectedDenomination = null;

        const providers = {
            viettel: { name: 'Viettel'},
            vinaphone: { name: 'VinaPhone'},
            mobiphone: { name: 'MobiPhone' }
        };

        function selectProvider(provider, element) {
            selectedProvider = provider;
            
            // Update UI
            document.querySelectorAll('.provider-card').forEach(card => {
                card.classList.remove('active');
            });
            element.classList.add('active');

            // Enable/disable input fields
            const serialInput = document.getElementById('serialNumber');
            const pinInput = document.getElementById('pinCode');
            serialInput.disabled = false;
            pinInput.disabled = false;

            updateSummary();
            checkFormValidity();
        }

        function selectDenomination(value, element) {
            selectedDenomination = value;

            // Update UI
            document.querySelectorAll('.denomination-card').forEach(card => {
                card.classList.remove('active');
            });
            element.classList.add('active');

            updateSummary();
            checkFormValidity();
        }

        function updateSummary() {
            const providerName = selectedProvider ? providers[selectedProvider].name : '-';
            const denominationValue = selectedDenomination ? selectedDenomination.toLocaleString('vi-VN') + ' đ' : '-';
            const total = selectedDenomination ? selectedDenomination.toLocaleString('vi-VN') + ' ' : '0 ';

            document.getElementById('summaryProvider').textContent = providerName;
            document.getElementById('summaryDenomination').textContent = denominationValue;
            document.getElementById('summaryTotal').children[0].textContent = total;
        }

        function checkFormValidity() {
            const serialNumber = document.getElementById('serialNumber').value;
            const pinCode = document.getElementById('pinCode').value;
            const isValid = selectedProvider && selectedDenomination && serialNumber && pinCode;

            document.getElementById('submitBtn').disabled = !isValid;
        }

        // Add event listeners for input validation
        document.getElementById('serialNumber').addEventListener('input', checkFormValidity);
        document.getElementById('pinCode').addEventListener('input', checkFormValidity);

        function resetForm() {
            selectedProvider = null;
            selectedDenomination = null;

            document.querySelectorAll('.provider-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelectorAll('.denomination-card').forEach(card => {
                card.classList.remove('active');
            });

            document.getElementById('serialNumber').disabled = true;
            document.getElementById('pinCode').disabled = true;
            document.getElementById('serialNumber').value = '';
            document.getElementById('pinCode').value = '';

            updateSummary();
            checkFormValidity();
        }

        function handleSubmit(event) {
            event.preventDefault();

            if (!isLoggedIn()) {
                showToast('Vui lòng đăng nhập để nạp thẻ!', 'fa-circle-exclamation', '#e74c3c');
                return;
            }

            const formData = {
                provider: selectedProvider,
                denomination: selectedDenomination,
                serialNumber: document.getElementById('serialNumber').value,
                pinCode: document.getElementById('pinCode').value
            };

            console.log('Submit recharge:', formData);
            showToast('Nạp thẻ thành công! Vui lòng chờ xác nhận.', 'fa-circle-check', '#2ecc71');
            
            // Reset form after successful submission
            setTimeout(() => {
                resetForm();
                document.getElementById('rechargeForm').reset();
            }, 2000);
        }
    </script>
</body>
</html>